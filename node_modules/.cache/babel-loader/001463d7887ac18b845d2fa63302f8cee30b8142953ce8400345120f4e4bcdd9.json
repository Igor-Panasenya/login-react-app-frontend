{"ast":null,"code":"import axios from 'axios';\naxios.defaults.baseURL = 'http://localhost:8000';\n// axios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\n// Make API Requests\n\n// authenticate function\nexport async function authenticate(username) {\n  try {\n    console.log('authenticate username:', username);\n    return await axios.post('/api/auth', {\n      username\n    });\n  } catch (error) {\n    console.log(error);\n    return {\n      error: \"Username doesn't exist...!\"\n    };\n  }\n}\n\n// get user details\nexport async function getUser(_ref) {\n  let {\n    username\n  } = _ref;\n  try {\n    const {\n      data\n    } = await axios.get(`/api/user/${username}`);\n    return {\n      data\n    };\n  } catch (error) {\n    return {\n      error: \"Password doesn't Match...!\"\n    };\n  }\n}\n\n// register user function\nexport async function registerUser(credentials) {\n  try {\n    const {\n      data: {\n        message\n      },\n      status\n    } = await axios.post(`/api/register`, credentials);\n    let {\n      username,\n      email\n    } = credentials;\n\n    // send email\n    if (status === 201) {\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text: message\n      });\n    }\n    return Promise.resolve(message);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n// login function\nexport async function verifyPassword(_ref2) {\n  let {\n    username,\n    password\n  } = _ref2;\n  try {\n    if (username) {\n      const {\n        data\n      } = await axios.post('/api/login', {\n        username,\n        password\n      });\n      return Promise.resolve({\n        data\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error: \"Password doesn't Match...!\"\n    });\n  }\n}\n\n// update user function\nexport async function updateUser(response) {\n  try {\n    const token = await localStorage.getItem('token');\n    const data = await axios.put('/api/updateuser', response, {\n      headers: {\n        \"Authorization\": `Beare ${token}`\n      }\n    });\n    return Promise.resolve({\n      data\n    });\n  } catch (error) {\n    return Promise.reject({\n      error: \"Couldn't Update Profile...!\"\n    });\n  }\n}\n\n// generate OTP\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: {\n        code\n      },\n      status\n    } = await axios.get('/api/generateOTP', {\n      params: {\n        username\n      }\n    });\n\n    // send mail with the OTP\n    if (status === 201) {\n      let {\n        data: {\n          email\n        }\n      } = await getUser({\n        username\n      });\n      let text = `Your Password Recovery OTP is ${code}. Verify and recovery password.`;\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text,\n        subject: \"Password Recovery OTP\"\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n// verify OTP\nexport async function verifyOTP(_ref3) {\n  let {\n    username,\n    code\n  } = _ref3;\n  try {\n    const {\n      data,\n      status\n    } = await axios.get('/api/verifyOTP', {\n      params: {\n        username,\n        code\n      }\n    });\n    return {\n      data,\n      status\n    };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\n// reset password\nexport async function resetPassword(_ref4) {\n  let {\n    username,\n    password\n  } = _ref4;\n  try {\n    const {\n      data,\n      status\n    } = await axios.put('/api/resetPassword', {\n      username,\n      password\n    });\n    return Promise.resolve({\n      data,\n      status\n    });\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}","map":{"version":3,"names":["axios","defaults","baseURL","authenticate","username","console","log","post","error","getUser","data","get","registerUser","credentials","message","status","email","userEmail","text","Promise","resolve","reject","verifyPassword","password","updateUser","response","token","localStorage","getItem","put","headers","generateOTP","code","params","subject","verifyOTP","resetPassword"],"sources":["D:/09 Programming/02 Trayning/08 Backend/login_react_app/client/src/helper/helper.js"],"sourcesContent":["import axios from 'axios';\r\naxios.defaults.baseURL = 'http://localhost:8000';\r\n// axios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\r\n// Make API Requests\r\n\r\n// authenticate function\r\nexport async function authenticate(username) {\r\n\r\n    try {\r\n        console.log('authenticate username:', username);\r\n\r\n        return await axios.post('/api/auth', { username });\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { error: \"Username doesn't exist...!\"}\r\n    }\r\n}\r\n\r\n// get user details\r\nexport async function getUser({ username }) {\r\n    try {\r\n        const { data } = await axios.get(`/api/user/${username}`);\r\n        return { data };\r\n    } catch (error) {\r\n        return { error: \"Password doesn't Match...!\"}\r\n    }\r\n}\r\n\r\n// register user function\r\nexport async function registerUser(credentials) {\r\n    try {\r\n        const { data : { message }, status } = await axios.post(`/api/register`, credentials);\r\n\r\n        let { username, email } = credentials;\r\n\r\n        // send email\r\n        if (status === 201) {\r\n            await axios.post('/api/registerMail', { username, userEmail : email, text: message })\r\n        }\r\n\r\n        return Promise.resolve(message);\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}\r\n\r\n// login function\r\nexport async function verifyPassword({ username, password }) {\r\n    try {\r\n        if (username) {\r\n            const { data } = await axios.post('/api/login', { username, password });\r\n            return Promise.resolve({ data });\r\n        }\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Password doesn't Match...!\" })\r\n    }\r\n}\r\n\r\n// update user function\r\nexport async function updateUser(response) {\r\n    try {\r\n\r\n        const token = await localStorage.getItem('token');\r\n        const data = await axios.put('/api/updateuser', response, { headers: { \"Authorization\" : `Beare ${token}` }});\r\n\r\n        return Promise.resolve({ data });\r\n\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Couldn't Update Profile...!\"})\r\n    }\r\n}\r\n\r\n// generate OTP\r\nexport async function generateOTP(username) {\r\n    try {\r\n\r\n        const { data : { code }, status } = await axios.get('/api/generateOTP', { params : { username }});\r\n\r\n        // send mail with the OTP\r\n        if (status === 201) {\r\n            let { data : { email } } = await getUser({ username });\r\n            let text = `Your Password Recovery OTP is ${code}. Verify and recovery password.`;\r\n            await axios.post('/api/registerMail', { username, userEmail : email, text, subject : \"Password Recovery OTP\" });\r\n        }\r\n\r\n        return Promise.resolve(code);\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}\r\n\r\n// verify OTP\r\nexport async function verifyOTP({ username, code }) {\r\n    try {\r\n        const { data, status } = await axios.get('/api/verifyOTP', { params : { username, code }})\r\n        return { data, status }\r\n    } catch (error) {\r\n        return Promise.reject(error);\r\n    }\r\n}\r\n\r\n// reset password\r\nexport async function resetPassword({ username, password }) {\r\n    try {\r\n        const { data, status } = await axios.put('/api/resetPassword', { username, password });\r\n        return Promise.resolve({ data, status })\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}